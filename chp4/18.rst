练习 4.18
============

如本练习中所示的扫描方法不能工作，但是用课本正文中的扫描方式可以工作。

按本练习的扫描方法，要求内部定义变量的值必须要在不使用其他内部定义变量的值的情况下求值（课本原文）。

具体来说，内部定义变量 y 在定义时的确不需要内部定义变量 dy 的值，（由于特殊形式 delay 的关系，dy 在一个 lambda 体内，在定义 y 时并不直接使用 dy 的值），但是在对内部定义变量 dy 定义时，其值的表达式则必须使用 y 的值。这与以上要求是矛盾的。

再具体结合代码来看为什么本练习的扫描方式提出了这样的要求。首先内部定义 y 和 dy 都被约束到 *unassigned*，然后再次构造一个框架在该框架中来约束变量 a 和 b，用定义 y 的值表达式来求 a 的约束值，没有问题，再用定义 dy 的值表达式来求 b 的约数值时，发现需要用到 y 的值，但是注意，此时 y 的值仍然是 *unassigned*， 因此 lookup-variable-value 将报错。不能继续工作。

但是课本正文中的扫描方式却可以工作，因为在对 dy 进行赋值时，虽然需要用到 y 的值，但是就在 dy 赋值以前，我们已经完成了对 y 的赋值，因此此时，y 的值已经不是 *unassigned* 了。故可以继续工作。 
