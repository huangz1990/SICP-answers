练习 4.47
============

Louis Reasoner 的建议行不通。如果一个句子可以成功按照语法分析出来，那么该过程的头几次成功的分析将成功，但是最后失败的分析将不会返回而陷入无限循环当中。原因是，该过程首先给出两个选择，然后尝试去组建动词短语，而第一个选择一定会失败，因为它已经用完所有介词短语，依然还去尝试组建下一个介词短语，因此一定会陷入到第二个选择种，但是第二个选择有给出了两个同样的选择，第一个失败，第二个又给出相同的两个选择……

正文中的版本之所以在尝试完所有成功分析后，能够在没有更多成功分析可能，也就是在分析完全失败时返回的原因在于，它总是首先尝试组建一个动词短语，然后再给出两种选择，因此，在某个阶段失败后，它就不再继续给出更多选择，而是一层一层往上返回，最终得出没有更多可能的结果，从而结束。

交换顺序以后事情更糟糕，因为，amb 总是尝试第一个选择，第一个选择又给出两个选择，然后该过程又尝试第一个选择，该选择又给出两个选择，其中第一个选择又给出两个选择……第一项选择又没有任何终止测试，因此就将无限循环下去，直至内存耗尽。

以下是在我的电脑上运行更改了 amb 语句中两个表达式顺序的程序约半分钟后的结果::

  ;;; Amb-Eval input:
  (parse '(the professor lectures to the student))

  ;;; Starting a new problem 
  ;... aborted
  ;Aborting!: out of memory
  ;GC #1556: took:   0.20   (5%) CPU time,   0.40  (10%) real time; free: 16765978
  ;GC #1557: took:   0.20 (100%) CPU time,   0.40  (95%) real time; free: 16766047

按理说，Louis 的建议在失败时也将耗尽内存，但是由于还是有机会用到回溯的机制，因此出现内存耗尽现象的时间远比更改了 amb 语句中两个表达式顺序的版本所需时间要长。